<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wi-Fiæ¥ç¶šã‚µãƒãƒ¼ãƒˆãƒãƒ£ãƒƒãƒˆ</title>
    <!-- Tailwind CSSã‚’èª­ã¿è¾¼ã¿ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Reactã¨ReactDOMã‚’èª­ã¿è¾¼ã¿ -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <!-- JSXã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§å¤‰æ›ã™ã‚‹ãŸã‚ã®Babelã‚’èª­ã¿è¾¼ã¿ -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ */
        body {
            font-family: sans-serif;
        }
    </style>
</head>
<body>
    <!-- Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæç”»ã•ã‚Œã‚‹ãƒ«ãƒ¼ãƒˆè¦ç´  -->
    <div id="root"></div>

    <!-- Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        /**
         * Wi-Fiæ¥ç¶šã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸã€èª•ç”Ÿæ—¥ã‚µãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½ä»˜ãã®ãƒãƒ£ãƒƒãƒˆUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
         */
        function WiFiChatUI() {
            // ç¾åœ¨è¡¨ç¤ºã—ã¦ã„ã‚‹ãƒãƒ£ãƒƒãƒˆãƒãƒ¼ãƒ‰ã®IDã‚’ç®¡ç†ã™ã‚‹state
            const [currentNode, setCurrentNode] = useState('intro');
            // èª•ç”Ÿæ—¥ã®ãŠç¥ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã‹ã©ã†ã‹ã®ãƒ•ãƒ©ã‚°
            const [showCelebration, setShowCelebration] = useState(false);

            // ãƒãƒ£ãƒƒãƒˆã®ã‚·ãƒŠãƒªã‚ªãƒ‡ãƒ¼ã‚¿
            const chatData = {
                title: "Wi-Fiæ¥ç¶šã‚µãƒãƒ¼ãƒˆãƒãƒ£ãƒƒãƒˆï¼šã‚ãªãŸã¯ä½•è€…ï¼Ÿ",
                nodes: [
                    {
                        id: "intro",
                        type: "message",
                        text: "AIãƒãƒ£ãƒƒãƒˆã€Œã“ã‚“ã«ã¡ã¯ã€Wi-Fiæ¥ç¶šã«ãŠå›°ã‚Šã§ã™ã‹ï¼Ÿã€",
                        options: [
                            { text: "ã¯ã„ã€æ¥ç¶šæ–¹æ³•ã‚’æ•™ãˆã¦ãã ã•ã„", next_id: "support_start" },
                            { text: "ã„ã‚„ã€ã¡ã‚‡ã£ã¨æ§˜å­ã‚’è¦‹ã¦ã‚‹ã ã‘", next_id: "casual_chat" }
                        ]
                    },
                    {
                        id: "support_start",
                        type: "message",
                        text: "AIãƒãƒ£ãƒƒãƒˆã€Œæ¥ç¶šã«ã¯èªè¨¼ãŒå¿…è¦ã§ã™ã€‚ãŠåå‰ã¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€",
                        options: [
                            { text: "æœ¬åã¨ä¼šç¤¾ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›", next_id: "formal_auth" },
                            { text: "ä»®åã§é©å½“ã«ç­”ãˆã‚‹", next_id: "fake_auth" }
                        ]
                    },
                    {
                        id: "casual_chat",
                        type: "message",
                        text: "AIãƒãƒ£ãƒƒãƒˆã€Œãªã‚‹ã»ã©ã€‚ã˜ã‚ƒã‚å°‘ã—ã ã‘é›‘è«‡ã§ã‚‚ã©ã†ã§ã™ã‹ï¼Ÿã€",
                        options: [
                            { text: "æœ€è¿‘ãƒãƒã£ã¦ã‚‹é£²ã¿ç‰©ã¯ï¼Ÿ", next_id: "casual_continue" },
                            { text: "å¥½ããªéŸ³æ¥½ã¯ï¼Ÿ", next_id: "casual_continue" }
                        ]
                    },
                    {
                        id: "casual_continue",
                        type: "message",
                        text: "AIãƒãƒ£ãƒƒãƒˆã€Œãã†ã„ãˆã°ã€â—‹â—‹ã•ã‚“ã£ã¦8æœˆç”Ÿã¾ã‚Œã§ã—ãŸã‚ˆã­ï¼Ÿã€",
                        options: [
                            { text: "ãªã‚“ã§çŸ¥ã£ã¦ã‚‹ã®ï¼Ÿ", next_id: "birthday" },
                            { text: "ã‚‚ã—ã‹ã—ã¦ã€ã“ã‚Œã¯èª•ç”Ÿæ—¥ãƒ‰ãƒƒã‚­ãƒªâ€¦ï¼Ÿ", next_id: "birthday" }
                        ]
                    },
                    {
                        id: "formal_auth",
                        type: "message",
                        text: "AIãƒãƒ£ãƒƒãƒˆã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã‚ã¨ã¯æ¥ç¶šã‚’è©¦ã™ã ã‘ã§ã™ã­ï¼â€¦ã¨ã“ã‚ã§ã€â—‹â—‹ã•ã‚“ã€8æœˆç”Ÿã¾ã‚Œã§ã—ãŸã‚ˆã­ï¼Ÿã€",
                        options: [
                            { text: "ãˆã£ã€ãªã‚“ã§èª•ç”Ÿæ—¥çŸ¥ã£ã¦ã‚‹ã®ï¼Ÿ", next_id: "birthday" },
                            { text: "æ°—ã®ã›ã„ã§ã™", next_id: "birthday" }
                        ]
                    },
                    {
                        id: "fake_auth",
                        type: "message",
                        text: "AIãƒãƒ£ãƒƒãƒˆã€Œ\"åç„¡ã—ã®ã‚´ãƒ³ãƒ™ã‚¨\"ã•ã‚“ã§ã™ã­ã€äº†è§£ã§ã™ã€‚ã§ã‚‚â€¦æœ¬å½“ã¯â—‹â—‹ã•ã‚“ã˜ã‚ƒãªã„ã§ã™ã‹ï¼Ÿ8æœˆç”Ÿã¾ã‚Œã®ã€‚ã€",
                        options: [
                            { text: "â€¦â€¦ãªãœåˆ†ã‹ã£ãŸï¼Ÿ", next_id: "birthday" }
                        ]
                    },
                    {
                        id: "birthday",
                        type: "message",
                        text: "ğŸ‚ AIãƒãƒ£ãƒƒãƒˆã€ŒHappy Birthday, â—‹â—‹ã•ã‚“ï¼ã€ ğŸ‰\nç”»é¢å…¨ä½“ã«ãƒãƒ¼ãƒãƒ£ãƒ«ã‚±ãƒ¼ã‚­ã€é¢¨èˆ¹ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nã€Œã‚ãªãŸã‚’å¿˜ã‚Œãªã„ã€ç‰¹åˆ¥ãªAIã‚µãƒãƒ¼ãƒˆã‚ˆã‚Šã€",
                        options: [
                            { text: "ç¥ã‚ã‚Œã¦ç…§ã‚Œã‚‹", next_id: "end_shy" },
                            { text: "èª°ãŒä»•çµ„ã‚“ã ã‹å•ã„è©°ã‚ã‚‹", next_id: "end_mystery" }
                        ]
                    },
                    {
                        id: "end_shy",
                        type: "ending",
                        text: "ã‚ãªãŸã¯ç…§ã‚ŒãªãŒã‚‰ç¬‘é¡”ã§ã‚±ãƒ¼ã‚­ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦‹ã‚‹ã€‚\nä»Šæ—¥ãŒã¡ã‚‡ã£ã¨ã ã‘ç‰¹åˆ¥ãªæ—¥ã«ãªã£ãŸã€‚"
                    },
                    {
                        id: "end_mystery",
                        type: "ending",
                        text: "ãƒãƒ£ãƒƒãƒˆã¯çªç„¶çµ‚äº†ã™ã‚‹ã€‚\nç”»é¢ã«æ®‹ã‚‹ã®ã¯ä¸€è¨€â”€â”€ã€Œã¾ãŸã€æ¥å¹´ã‚‚ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ã€‚ã€"
                    }
                ]
            };

            /**
             * showCelebrationãƒ•ãƒ©ã‚°ãŒtrueã«ãªã£ãŸæ™‚ã«å‰¯ä½œç”¨ã‚’å®Ÿè¡Œã™ã‚‹
             * ãŠç¥ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’è¡¨ç¤ºã—ãŸ0.5ç§’å¾Œã«ã€èª•ç”Ÿæ—¥ãƒãƒ¼ãƒ‰ã«é·ç§»ã•ã›ã‚‹
             */
            useEffect(() => {
                let timer;
                if (showCelebration) {
                    timer = setTimeout(() => {
                        setCurrentNode('birthday');
                    }, 500);
                }
                // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—é–¢æ•°: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã‹ã€
                // ä¾å­˜é–¢ä¿‚(showCelebration)ãŒå¤‰æ›´ã•ã‚Œã‚‹å‰ã«ã‚¿ã‚¤ãƒãƒ¼ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹
                return () => clearTimeout(timer);
            }, [showCelebration]);

            // ç¾åœ¨ã®ãƒãƒ¼ãƒ‰IDã«åŸºã¥ã„ã¦ãƒãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹
            const nodeData = chatData.nodes.find(node => node.id === currentNode);

            /**
             * é¸æŠè‚¢ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†
             * @param {string} nextId - æ¬¡ã«è¡¨ç¤ºã™ã‚‹ãƒãƒ¼ãƒ‰ã®ID
             */
            function handleOptionClick(nextId) {
                if (nextId === 'birthday') {
                    // ãŠç¥ã„ãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹ã€‚å®Ÿéš›ã®ãƒãƒ¼ãƒ‰é·ç§»ã¯useEffectã«ä»»ã›ã‚‹
                    setShowCelebration(true);
                } else {
                    setCurrentNode(nextId);
                }
            }

            /**
             * ãƒãƒ£ãƒƒãƒˆã‚’åˆæœŸçŠ¶æ…‹ã«ãƒªã‚»ãƒƒãƒˆã™ã‚‹
             */
            function resetChat() {
                setCurrentNode('intro');
                setShowCelebration(false);
            }

            // ç¾åœ¨ã®ãƒãƒ¼ãƒ‰ãŒèª•ç”Ÿæ—¥ãƒãƒ¼ãƒ‰ã‹ã€ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒãƒ¼ãƒ‰ã‹ã®åˆ¤å®šãƒ•ãƒ©ã‚°
            const isBirthdayNode = currentNode === 'birthday';
            const isEndingNode = nodeData && nodeData.type === 'ending';

            // ç´™å¹é›ªã‚¨ãƒ•ã‚§ã‚¯ãƒˆç”¨ã®è¦ç´ ã‚’ç”Ÿæˆã™ã‚‹
            const confettiItems = [];
            if (showCelebration) {
                // ç´™å¹é›ªã®æ•°ã‚’30å€‹ã«å¢—ã‚„ã—ã¦è¯ã‚„ã‹ã«
                for (let i = 0; i < 30; i++) {
                    const emojis = ['ğŸ‰', 'ğŸ‚', 'ğŸˆ', 'âœ¨', 'ğŸŠ'];
                    confettiItems.push(
                        <div
                            key={`confetti-${i}`} // ã‚ˆã‚Šå®‰å®šã—ãŸãƒ¦ãƒ‹ãƒ¼ã‚¯ãªkey
                            className="absolute animate-bounce text-2xl"
                            style={{
                                left: `${Math.random() * 100}%`,
                                top: `${Math.random() * 100}%`,
                                animationDelay: `${Math.random() * 2}s`
                            }}
                        >
                            {emojis[Math.floor(Math.random() * emojis.length)]}
                        </div>
                    );
                }
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative overflow-hidden">
                    {/* ãŠç¥ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠ */}
                    {showCelebration && (
                        <div className="fixed inset-0 z-50 pointer-events-none">
                            {confettiItems}
                        </div>
                    )}

                    <div className="max-w-2xl mx-auto">
                        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                        <div className="bg-white rounded-t-lg shadow-lg p-6 border-b-2 border-blue-200">
                            <h1 className="text-2xl font-bold text-gray-800 text-center">
                                {chatData.title}
                            </h1>
                        </div>

                        {/* ãƒ¡ã‚¤ãƒ³ã®ãƒãƒ£ãƒƒãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ */}
                        <div className={`bg-white shadow-lg min-h-96 p-6 transition-all duration-500 ${
                            isBirthdayNode ? 'bg-gradient-to-br from-pink-50 to-yellow-50' : ''
                            } ${isEndingNode ? 'rounded-b-lg' : ''}`}>
                            
                            {/* AIã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
                            <div className={`mb-6 p-4 rounded-lg transition-all duration-500 ${
                                isBirthdayNode 
                                ? 'bg-gradient-to-r from-pink-100 to-yellow-100 border-2 border-pink-200 shadow-lg' 
                                : 'bg-gray-50 border border-gray-200'
                            }`}>
                                <div className={`text-lg whitespace-pre-line ${
                                isBirthdayNode ? 'text-center font-semibold text-pink-800' : 'text-gray-800'
                                }`}>
                                {nodeData && nodeData.text}
                                </div>
                                
                                {/* èª•ç”Ÿæ—¥ãƒãƒ¼ãƒ‰å°‚ç”¨ã®çµµæ–‡å­—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */}
                                {isBirthdayNode && (
                                <div className="mt-4 flex justify-center items-center space-x-4">
                                    <div className="text-4xl animate-bounce" style={{animationDelay: '0.1s'}}>ğŸ‚</div>
                                    <div className="text-4xl animate-bounce" style={{animationDelay: '0.2s'}}>ğŸˆ</div>
                                    <div className="text-4xl animate-bounce" style={{animationDelay: '0.3s'}}>ğŸ‰</div>
                                </div>
                                )}
                            </div>

                            {/* ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠè‚¢ */}
                            {nodeData && nodeData.options && (
                                <div className="space-y-3">
                                {nodeData.options.map((option, index) => (
                                    <button
                                    key={index}
                                    onClick={() => handleOptionClick(option.next_id)}
                                    className={`w-full p-4 rounded-lg text-left transition-all duration-300 transform hover:scale-105 hover:shadow-md font-medium ${
                                        isBirthdayNode
                                        ? 'bg-gradient-to-r from-purple-100 to-pink-100 border-2 border-purple-200 hover:from-purple-200 hover:to-pink-200 text-purple-800'
                                        : 'bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-800'
                                    }`}
                                    >
                                    {option.text}
                                    </button>
                                ))}
                                </div>
                            )}

                            {/* ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
                            {isEndingNode && (
                                <div className="mt-6 text-center">
                                <div className="text-gray-600 mb-6 italic text-lg">
                                    {nodeData.text}
                                </div>
                                <button
                                    onClick={resetChat}
                                    className="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300 transform hover:scale-105"
                                >
                                    æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™
                                </button>
                                </div>
                            )}
                        </div>

                        {/* ãƒ•ãƒƒã‚¿ãƒ¼ã®ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ */}
                        {!isEndingNode && (
                        <div className="bg-gray-100 rounded-b-lg shadow-lg p-4 text-center">
                            <button
                            onClick={resetChat}
                            className="text-gray-500 hover:text-gray-700 text-sm transition-colors duration-300"
                            >
                            ãƒªã‚»ãƒƒãƒˆ
                            </button>
                        </div>
                        )}
                    </div>

                    {/* èƒŒæ™¯ã®Wi-Fiã‚¢ã‚¤ã‚³ãƒ³ */}
                    <div className="fixed bottom-4 right-4 opacity-20">
                        <div className="animate-pulse">
                        <div className="w-12 h-12 text-blue-300 text-4xl">ğŸ“¶</div>
                        </div>
                    </div>
                </div>
            );
        }

        // Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ #root è¦ç´ ã«æç”»
        ReactDOM.render(<WiFiChatUI />, document.getElementById('root'));
    </script>
</body>
</html>
